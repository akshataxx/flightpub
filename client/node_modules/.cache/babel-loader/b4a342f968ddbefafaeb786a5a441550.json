{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.usePopover = void 0;\n\nvar react_1 = require(\"react\");\n\nvar util_1 = require(\"./util\");\n\nvar useElementRef_1 = require(\"./useElementRef\");\n\nvar usePopover = function (_a) {\n  var childRef = _a.childRef,\n      positions = _a.positions,\n      containerClassName = _a.containerClassName,\n      parentElement = _a.parentElement,\n      contentLocation = _a.contentLocation,\n      align = _a.align,\n      padding = _a.padding,\n      reposition = _a.reposition,\n      boundaryInset = _a.boundaryInset,\n      boundaryElement = _a.boundaryElement,\n      onPositionPopover = _a.onPositionPopover;\n  var popoverRef = useElementRef_1.useElementRef(containerClassName, {\n    position: 'fixed',\n    overflow: 'visible',\n    top: '0px',\n    left: '0px'\n  });\n  var scoutRef = useElementRef_1.useElementRef('react-tiny-popover-scout', {\n    position: 'fixed',\n    top: '0px',\n    left: '0px',\n    width: '0px',\n    height: '0px',\n    visibility: 'hidden'\n  });\n  var positionPopover = react_1.useCallback(function (_a) {\n    var _b, _c;\n\n    var _d = _a === void 0 ? {} : _a,\n        _e = _d.positionIndex,\n        positionIndex = _e === void 0 ? 0 : _e,\n        _f = _d.parentRect,\n        parentRect = _f === void 0 ? parentElement.getBoundingClientRect() : _f,\n        _g = _d.childRect,\n        childRect = _g === void 0 ? (_b = childRef === null || childRef === void 0 ? void 0 : childRef.current) === null || _b === void 0 ? void 0 : _b.getBoundingClientRect() : _g,\n        _h = _d.scoutRect,\n        scoutRect = _h === void 0 ? (_c = scoutRef === null || scoutRef === void 0 ? void 0 : scoutRef.current) === null || _c === void 0 ? void 0 : _c.getBoundingClientRect() : _h,\n        _j = _d.popoverRect,\n        popoverRect = _j === void 0 ? popoverRef.current.getBoundingClientRect() : _j,\n        _k = _d.boundaryRect,\n        boundaryRect = _k === void 0 ? boundaryElement === parentElement ? parentRect : boundaryElement.getBoundingClientRect() : _k;\n\n    if (!childRect || !parentRect) {\n      return;\n    }\n\n    if (contentLocation) {\n      var _l = typeof contentLocation === 'function' ? contentLocation({\n        childRect: childRect,\n        popoverRect: popoverRect,\n        parentRect: parentRect,\n        boundaryRect: boundaryRect,\n        padding: padding,\n        nudgedTop: 0,\n        nudgedLeft: 0,\n        boundaryInset: boundaryInset\n      }) : contentLocation,\n          inputTop = _l.top,\n          inputLeft = _l.left;\n\n      var left_1 = parentRect.left + inputLeft;\n      var top_1 = parentRect.top + inputTop;\n      popoverRef.current.style.transform = \"translate(\" + (left_1 - scoutRect.left) + \"px, \" + (top_1 - scoutRect.top) + \"px)\";\n      onPositionPopover({\n        childRect: childRect,\n        popoverRect: popoverRect,\n        parentRect: parentRect,\n        boundaryRect: boundaryRect,\n        padding: padding,\n        nudgedTop: 0,\n        nudgedLeft: 0,\n        boundaryInset: boundaryInset\n      });\n      return;\n    }\n\n    var isExhausted = positionIndex === positions.length;\n    var position = isExhausted ? positions[0] : positions[positionIndex];\n\n    var _m = util_1.getNewPopoverRect({\n      childRect: childRect,\n      popoverRect: popoverRect,\n      boundaryRect: boundaryRect,\n      position: position,\n      align: align,\n      padding: padding,\n      reposition: reposition\n    }, boundaryInset),\n        rect = _m.rect,\n        boundaryViolation = _m.boundaryViolation;\n\n    if (boundaryViolation && reposition && !isExhausted) {\n      positionPopover({\n        positionIndex: positionIndex + 1,\n        childRect: childRect,\n        popoverRect: popoverRect,\n        parentRect: parentRect,\n        boundaryRect: boundaryRect\n      });\n      return;\n    }\n\n    var top = rect.top,\n        left = rect.left,\n        width = rect.width,\n        height = rect.height;\n    var shouldNudge = reposition && !isExhausted;\n\n    var _o = util_1.getNudgedPopoverRect(rect, boundaryRect, boundaryInset),\n        nudgedLeft = _o.left,\n        nudgedTop = _o.top;\n\n    var finalTop = top;\n    var finalLeft = left;\n\n    if (shouldNudge) {\n      finalTop = nudgedTop;\n      finalLeft = nudgedLeft;\n    }\n\n    popoverRef.current.style.transform = \"translate(\" + (finalLeft - scoutRect.left) + \"px, \" + (finalTop - scoutRect.top) + \"px)\";\n    onPositionPopover({\n      childRect: childRect,\n      popoverRect: {\n        top: finalTop,\n        left: finalLeft,\n        width: width,\n        height: height,\n        right: finalLeft + width,\n        bottom: finalTop + height\n      },\n      parentRect: parentRect,\n      boundaryRect: boundaryRect,\n      position: position,\n      align: align,\n      padding: padding,\n      nudgedTop: nudgedTop - top,\n      nudgedLeft: nudgedLeft - left,\n      boundaryInset: boundaryInset\n    });\n  }, [parentElement, childRef, popoverRef, boundaryElement, contentLocation, positions, align, padding, reposition, boundaryInset, onPositionPopover]);\n  return {\n    positionPopover: positionPopover,\n    popoverRef: popoverRef,\n    scoutRef: scoutRef\n  };\n};\n\nexports.usePopover = usePopover;","map":{"version":3,"mappings":"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","names":["usePopover","_a","childRef","positions","containerClassName","parentElement","contentLocation","align","padding","reposition","boundaryInset","boundaryElement","onPositionPopover","popoverRef","useElementRef_1","position","overflow","top","left","scoutRef","width","height","visibility","positionPopover","react_1","_d","_e","positionIndex","_f","parentRect","getBoundingClientRect","_g","childRect","current","_b","_h","scoutRect","_c","_j","popoverRect","_k","boundaryRect","nudgedTop","nudgedLeft","inputTop","inputLeft","left_1","top_1","style","transform","isExhausted","length","util_1","rect","boundaryViolation","shouldNudge","finalTop","finalLeft","right","bottom","exports"],"sources":["C:\\Users\\ewart\\OneDrive\\Documents\\GitHub\\flightpub\\client\\node_modules\\react-tiny-popover\\src\\usePopover.ts"],"sourcesContent":["import { useCallback } from 'react';\nimport { PositionPopover, UsePopoverProps, UsePopoverResult } from '.';\nimport { getNewPopoverRect, getNudgedPopoverRect } from './util';\nimport { useElementRef } from './useElementRef';\n\nexport const usePopover = ({\n  childRef,\n  positions,\n  containerClassName,\n  parentElement,\n  contentLocation,\n  align,\n  padding,\n  reposition,\n  boundaryInset,\n  boundaryElement,\n  onPositionPopover,\n}: UsePopoverProps): UsePopoverResult => {\n  const popoverRef = useElementRef(containerClassName, {\n    position: 'fixed',\n    overflow: 'visible',\n    top: '0px',\n    left: '0px',\n  });\n\n  const scoutRef = useElementRef('react-tiny-popover-scout', {\n    position: 'fixed',\n    top: '0px',\n    left: '0px',\n    width: '0px',\n    height: '0px',\n    visibility: 'hidden',\n  });\n\n  const positionPopover = useCallback<PositionPopover>(\n    ({\n      positionIndex = 0,\n      parentRect = parentElement.getBoundingClientRect(),\n      childRect = childRef?.current?.getBoundingClientRect(),\n      scoutRect = scoutRef?.current?.getBoundingClientRect(),\n      popoverRect = popoverRef.current.getBoundingClientRect(),\n      boundaryRect = boundaryElement === parentElement\n        ? parentRect\n        : boundaryElement.getBoundingClientRect(),\n    } = {}) => {\n      if (!childRect || !parentRect) {\n        return;\n      }\n\n      if (contentLocation) {\n        const { top: inputTop, left: inputLeft } =\n          typeof contentLocation === 'function'\n            ? contentLocation({\n                childRect,\n                popoverRect,\n                parentRect,\n                boundaryRect,\n                padding,\n                nudgedTop: 0,\n                nudgedLeft: 0,\n                boundaryInset,\n              })\n            : contentLocation;\n\n        const left = parentRect.left + inputLeft;\n        const top = parentRect.top + inputTop;\n\n        popoverRef.current.style.transform = `translate(${left - scoutRect.left}px, ${\n          top - scoutRect.top\n        }px)`;\n\n        onPositionPopover({\n          childRect,\n          popoverRect,\n          parentRect,\n          boundaryRect,\n          padding,\n          nudgedTop: 0,\n          nudgedLeft: 0,\n          boundaryInset,\n        });\n\n        return;\n      }\n\n      const isExhausted = positionIndex === positions.length;\n      const position = isExhausted ? positions[0] : positions[positionIndex];\n\n      const { rect, boundaryViolation } = getNewPopoverRect(\n        {\n          childRect,\n          popoverRect,\n          boundaryRect,\n          position,\n          align,\n          padding,\n          reposition,\n        },\n        boundaryInset,\n      );\n\n      if (boundaryViolation && reposition && !isExhausted) {\n        positionPopover({\n          positionIndex: positionIndex + 1,\n          childRect,\n          popoverRect,\n          parentRect,\n          boundaryRect,\n        });\n        return;\n      }\n\n      const { top, left, width, height } = rect;\n      const shouldNudge = reposition && !isExhausted;\n      const { left: nudgedLeft, top: nudgedTop } = getNudgedPopoverRect(\n        rect,\n        boundaryRect,\n        boundaryInset,\n      );\n\n      let finalTop = top;\n      let finalLeft = left;\n\n      if (shouldNudge) {\n        finalTop = nudgedTop;\n        finalLeft = nudgedLeft;\n      }\n\n      popoverRef.current.style.transform = `translate(${finalLeft - scoutRect.left}px, ${\n        finalTop - scoutRect.top\n      }px)`;\n\n      onPositionPopover({\n        childRect,\n        popoverRect: {\n          top: finalTop,\n          left: finalLeft,\n          width,\n          height,\n          right: finalLeft + width,\n          bottom: finalTop + height,\n        },\n        parentRect,\n        boundaryRect,\n        position,\n        align,\n        padding,\n        nudgedTop: nudgedTop - top,\n        nudgedLeft: nudgedLeft - left,\n        boundaryInset,\n      });\n    },\n    [\n      parentElement,\n      childRef,\n      popoverRef,\n      boundaryElement,\n      contentLocation,\n      positions,\n      align,\n      padding,\n      reposition,\n      boundaryInset,\n      onPositionPopover,\n    ],\n  );\n\n  return {\n    positionPopover,\n    popoverRef,\n    scoutRef,\n  };\n};\n"]},"metadata":{},"sourceType":"script"}