{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getNudgedPopoverRect = exports.getNewPopoverRect = exports.popoverRectForPosition = exports.getBoundingRectNeglectingPositionalTransform = exports.createContainer = exports.targetPositionHasChanged = exports.popoverStatesAreEqual = exports.rectsAreEqual = exports.arrayUnique = exports.Constants = void 0;\nexports.Constants = {\n  POPOVER_CONTAINER_CLASS_NAME: 'react-tiny-popover-container',\n  DEFAULT_ALIGN: 'center',\n  OBSERVER_THRESHOLDS: Array(1000).fill(null).map(function (_, i) {\n    return i / 1000;\n  }).reverse(),\n  DEFAULT_POSITIONS: ['top', 'left', 'right', 'bottom'],\n  EMPTY_CLIENT_RECT: {\n    top: 0,\n    left: 0,\n    bottom: 0,\n    height: 0,\n    right: 0,\n    width: 0\n  }\n};\n\nvar arrayUnique = function (array) {\n  return array.filter(function (value, index, self) {\n    return self.indexOf(value) === index;\n  });\n};\n\nexports.arrayUnique = arrayUnique;\n\nvar rectsAreEqual = function (rectA, rectB) {\n  return rectA === rectB || (rectA === null || rectA === void 0 ? void 0 : rectA.bottom) === (rectB === null || rectB === void 0 ? void 0 : rectB.bottom) && (rectA === null || rectA === void 0 ? void 0 : rectA.height) === (rectB === null || rectB === void 0 ? void 0 : rectB.height) && (rectA === null || rectA === void 0 ? void 0 : rectA.left) === (rectB === null || rectB === void 0 ? void 0 : rectB.left) && (rectA === null || rectA === void 0 ? void 0 : rectA.right) === (rectB === null || rectB === void 0 ? void 0 : rectB.right) && (rectA === null || rectA === void 0 ? void 0 : rectA.top) === (rectB === null || rectB === void 0 ? void 0 : rectB.top) && (rectA === null || rectA === void 0 ? void 0 : rectA.width) === (rectB === null || rectB === void 0 ? void 0 : rectB.width);\n};\n\nexports.rectsAreEqual = rectsAreEqual;\n\nvar popoverStatesAreEqual = function (stateA, stateB) {\n  return stateA === stateB || (stateA === null || stateA === void 0 ? void 0 : stateA.align) === (stateB === null || stateB === void 0 ? void 0 : stateB.align) && (stateA === null || stateA === void 0 ? void 0 : stateA.nudgedLeft) === (stateB === null || stateB === void 0 ? void 0 : stateB.nudgedLeft) && (stateA === null || stateA === void 0 ? void 0 : stateA.nudgedTop) === (stateB === null || stateB === void 0 ? void 0 : stateB.nudgedTop) && stateA.padding === stateB.padding && exports.rectsAreEqual(stateA === null || stateA === void 0 ? void 0 : stateA.popoverRect, stateB === null || stateB === void 0 ? void 0 : stateB.popoverRect) && exports.rectsAreEqual(stateA === null || stateA === void 0 ? void 0 : stateA.childRect, stateB === null || stateB === void 0 ? void 0 : stateB.childRect) && (stateA === null || stateA === void 0 ? void 0 : stateA.position) === (stateB === null || stateB === void 0 ? void 0 : stateB.position);\n};\n\nexports.popoverStatesAreEqual = popoverStatesAreEqual;\n\nvar targetPositionHasChanged = function (oldRect, newRect) {\n  return oldRect === undefined || oldRect.left !== newRect.left || oldRect.top !== newRect.top || oldRect.width !== newRect.width || oldRect.height !== newRect.height;\n};\n\nexports.targetPositionHasChanged = targetPositionHasChanged;\n\nvar createContainer = function (containerStyle, containerClassName) {\n  var container = window.document.createElement('div');\n  if (containerClassName) container.className = containerClassName;\n  Object.assign(container.style, containerStyle);\n  return container;\n};\n\nexports.createContainer = createContainer;\n\nvar getBoundingRectNeglectingPositionalTransform = function (element) {\n  if (element == null) return undefined;\n  var el = element;\n  var top = 0;\n  var left = 0;\n\n  do {\n    top += el.offsetTop;\n    left += el.offsetLeft;\n    el = el.offsetParent;\n  } while (el != null);\n\n  var scrollTop = 0;\n  var scrollLeft = 0;\n  el = element;\n\n  do {\n    scrollTop += el.scrollTop;\n    scrollLeft += el.scrollLeft;\n    el = el.parentElement;\n  } while (el != null);\n\n  top -= scrollTop;\n  left -= scrollLeft;\n\n  var _a = element.getBoundingClientRect(),\n      width = _a.width,\n      height = _a.height;\n\n  return {\n    top: top,\n    left: left,\n    width: width,\n    height: height,\n    bottom: top + height,\n    right: left + width\n  };\n};\n\nexports.getBoundingRectNeglectingPositionalTransform = getBoundingRectNeglectingPositionalTransform;\n\nvar popoverRectForPosition = function (position, childRect, popoverRect, padding, align) {\n  var targetMidX = childRect.left + childRect.width / 2;\n  var targetMidY = childRect.top + childRect.height / 2;\n  var width = popoverRect.width,\n      height = popoverRect.height;\n  var top;\n  var left;\n\n  switch (position) {\n    case 'left':\n      top = targetMidY - height / 2;\n      left = childRect.left - padding - width;\n\n      if (align === 'start') {\n        top = childRect.top;\n      }\n\n      if (align === 'end') {\n        top = childRect.bottom - height;\n      }\n\n      break;\n\n    case 'bottom':\n      top = childRect.bottom + padding;\n      left = targetMidX - width / 2;\n\n      if (align === 'start') {\n        left = childRect.left;\n      }\n\n      if (align === 'end') {\n        left = childRect.right - width;\n      }\n\n      break;\n\n    case 'right':\n      top = targetMidY - height / 2;\n      left = childRect.right + padding;\n\n      if (align === 'start') {\n        top = childRect.top;\n      }\n\n      if (align === 'end') {\n        top = childRect.bottom - height;\n      }\n\n      break;\n\n    default:\n      top = childRect.top - height - padding;\n      left = targetMidX - width / 2;\n\n      if (align === 'start') {\n        left = childRect.left;\n      }\n\n      if (align === 'end') {\n        left = childRect.right - width;\n      }\n\n      break;\n  }\n\n  return {\n    top: top,\n    left: left,\n    width: width,\n    height: height,\n    right: left + width,\n    bottom: top + height\n  };\n};\n\nexports.popoverRectForPosition = popoverRectForPosition;\n\nvar getNewPopoverRect = function (_a, boundaryInset) {\n  var position = _a.position,\n      align = _a.align,\n      childRect = _a.childRect,\n      popoverRect = _a.popoverRect,\n      boundaryRect = _a.boundaryRect,\n      padding = _a.padding,\n      reposition = _a.reposition;\n  var rect = exports.popoverRectForPosition(position, childRect, popoverRect, padding, align);\n  var boundaryViolation = reposition && (position === 'top' && rect.top < boundaryRect.top + boundaryInset || position === 'left' && rect.left < boundaryRect.left + boundaryInset || position === 'right' && rect.right > boundaryRect.right - boundaryInset || position === 'bottom' && rect.bottom > boundaryRect.bottom - boundaryInset);\n  return {\n    rect: rect,\n    boundaryViolation: boundaryViolation\n  };\n};\n\nexports.getNewPopoverRect = getNewPopoverRect;\n\nvar getNudgedPopoverRect = function (popoverRect, boundaryRect, boundaryInset) {\n  var topBoundary = boundaryRect.top + boundaryInset;\n  var leftBoundary = boundaryRect.left + boundaryInset;\n  var rightBoundary = boundaryRect.right - boundaryInset;\n  var bottomBoundary = boundaryRect.bottom - boundaryInset;\n  var top = popoverRect.top < topBoundary ? topBoundary : popoverRect.top;\n  top = top + popoverRect.height > bottomBoundary ? bottomBoundary - popoverRect.height : top;\n  var left = popoverRect.left < leftBoundary ? leftBoundary : popoverRect.left;\n  left = left + popoverRect.width > rightBoundary ? rightBoundary - popoverRect.width : left;\n  return {\n    top: top,\n    left: left,\n    width: popoverRect.width,\n    height: popoverRect.height,\n    right: left + popoverRect.width,\n    bottom: top + popoverRect.height\n  };\n};\n\nexports.getNudgedPopoverRect = getNudgedPopoverRect;","map":{"version":3,"mappings":"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","names":["exports","POPOVER_CONTAINER_CLASS_NAME","DEFAULT_ALIGN","OBSERVER_THRESHOLDS","Array","fill","map","_","i","reverse","DEFAULT_POSITIONS","EMPTY_CLIENT_RECT","top","left","bottom","height","right","width","arrayUnique","array","filter","value","index","self","indexOf","rectsAreEqual","rectA","rectB","popoverStatesAreEqual","stateA","stateB","align","nudgedLeft","nudgedTop","padding","popoverRect","childRect","position","targetPositionHasChanged","oldRect","newRect","undefined","createContainer","containerStyle","containerClassName","container","window","document","createElement","className","Object","assign","style","getBoundingRectNeglectingPositionalTransform","element","el","offsetTop","offsetLeft","offsetParent","scrollTop","scrollLeft","parentElement","getBoundingClientRect","popoverRectForPosition","targetMidX","targetMidY","getNewPopoverRect","_a","boundaryInset","boundaryRect","reposition","rect","boundaryViolation","getNudgedPopoverRect","topBoundary","leftBoundary","rightBoundary","bottomBoundary"],"sources":["C:\\Users\\ewart\\OneDrive\\Documents\\GitHub\\flightpub\\client\\node_modules\\react-tiny-popover\\src\\util.ts"],"sourcesContent":["import { PopoverPosition, PopoverState, PopoverAlign } from './index';\n\nexport const Constants = {\n  POPOVER_CONTAINER_CLASS_NAME: 'react-tiny-popover-container',\n  DEFAULT_ALIGN: 'center' as PopoverAlign,\n  OBSERVER_THRESHOLDS: Array(1000)\n    .fill(null)\n    .map((_, i) => i / 1000)\n    .reverse(),\n  DEFAULT_POSITIONS: ['top', 'left', 'right', 'bottom'] as PopoverPosition[],\n  EMPTY_CLIENT_RECT: {\n    top: 0,\n    left: 0,\n    bottom: 0,\n    height: 0,\n    right: 0,\n    width: 0,\n  } as ClientRect,\n} as const;\n\nexport const arrayUnique = <T>(array: T[]): T[] =>\n  array.filter((value: any, index: number, self: T[]) => self.indexOf(value) === index);\n\nexport const rectsAreEqual = (rectA: ClientRect, rectB: ClientRect) =>\n  rectA === rectB ||\n  (rectA?.bottom === rectB?.bottom &&\n    rectA?.height === rectB?.height &&\n    rectA?.left === rectB?.left &&\n    rectA?.right === rectB?.right &&\n    rectA?.top === rectB?.top &&\n    rectA?.width === rectB?.width);\n\nexport const popoverStatesAreEqual = (stateA: PopoverState, stateB: PopoverState): boolean =>\n  stateA === stateB ||\n  (stateA?.align === stateB?.align &&\n    stateA?.nudgedLeft === stateB?.nudgedLeft &&\n    stateA?.nudgedTop === stateB?.nudgedTop &&\n    stateA.padding === stateB.padding &&\n    rectsAreEqual(stateA?.popoverRect, stateB?.popoverRect) &&\n    rectsAreEqual(stateA?.childRect, stateB?.childRect) &&\n    stateA?.position === stateB?.position);\n\nexport const targetPositionHasChanged = (oldRect: ClientRect, newRect: ClientRect): boolean =>\n  oldRect === undefined ||\n  oldRect.left !== newRect.left ||\n  oldRect.top !== newRect.top ||\n  oldRect.width !== newRect.width ||\n  oldRect.height !== newRect.height;\n\nexport const createContainer = (\n  containerStyle?: Partial<CSSStyleDeclaration>,\n  containerClassName?: string,\n) => {\n  const container = window.document.createElement('div');\n  if (containerClassName) container.className = containerClassName;\n  Object.assign(container.style, containerStyle);\n  return container;\n};\n\nexport const getBoundingRectNeglectingPositionalTransform = (\n  element?: HTMLElement | null,\n): ClientRect | undefined => {\n  if (element == null) return undefined;\n\n  let el = element;\n  let top = 0;\n  let left = 0;\n\n  do {\n    top += el.offsetTop;\n    left += el.offsetLeft;\n    el = el.offsetParent as HTMLElement;\n  } while (el != null);\n\n  let scrollTop = 0;\n  let scrollLeft = 0;\n\n  el = element;\n  do {\n    scrollTop += el.scrollTop;\n    scrollLeft += el.scrollLeft;\n    el = el.parentElement;\n  } while (el != null);\n\n  top -= scrollTop;\n  left -= scrollLeft;\n\n  const { width, height } = element.getBoundingClientRect();\n  return { top, left, width, height, bottom: top + height, right: left + width };\n};\n\nexport const popoverRectForPosition = (\n  position: PopoverPosition,\n  childRect: ClientRect,\n  popoverRect: ClientRect,\n  padding: number,\n  align: PopoverAlign,\n): ClientRect => {\n  const targetMidX = childRect.left + childRect.width / 2;\n  const targetMidY = childRect.top + childRect.height / 2;\n  const { width, height } = popoverRect;\n  let top: number;\n  let left: number;\n\n  switch (position) {\n    case 'left':\n      top = targetMidY - height / 2;\n      left = childRect.left - padding - width;\n      if (align === 'start') {\n        top = childRect.top;\n      }\n      if (align === 'end') {\n        top = childRect.bottom - height;\n      }\n      break;\n    case 'bottom':\n      top = childRect.bottom + padding;\n      left = targetMidX - width / 2;\n      if (align === 'start') {\n        left = childRect.left;\n      }\n      if (align === 'end') {\n        left = childRect.right - width;\n      }\n      break;\n    case 'right':\n      top = targetMidY - height / 2;\n      left = childRect.right + padding;\n      if (align === 'start') {\n        top = childRect.top;\n      }\n      if (align === 'end') {\n        top = childRect.bottom - height;\n      }\n      break;\n    default:\n      top = childRect.top - height - padding;\n      left = targetMidX - width / 2;\n      if (align === 'start') {\n        left = childRect.left;\n      }\n      if (align === 'end') {\n        left = childRect.right - width;\n      }\n      break;\n  }\n\n  return { top, left, width, height, right: left + width, bottom: top + height };\n};\n\ninterface GetNewPopoverRectProps {\n  position: PopoverPosition;\n  reposition: boolean;\n  align: PopoverAlign;\n  childRect: ClientRect;\n  popoverRect: ClientRect;\n  boundaryRect: ClientRect;\n  padding: number;\n}\n\nexport const getNewPopoverRect = (\n  {\n    position,\n    align,\n    childRect,\n    popoverRect,\n    boundaryRect,\n    padding,\n    reposition,\n  }: GetNewPopoverRectProps,\n  boundaryInset: number,\n) => {\n  const rect = popoverRectForPosition(position, childRect, popoverRect, padding, align);\n\n  const boundaryViolation =\n    reposition &&\n    ((position === 'top' && rect.top < boundaryRect.top + boundaryInset) ||\n      (position === 'left' && rect.left < boundaryRect.left + boundaryInset) ||\n      (position === 'right' && rect.right > boundaryRect.right - boundaryInset) ||\n      (position === 'bottom' && rect.bottom > boundaryRect.bottom - boundaryInset));\n\n  return {\n    rect,\n    boundaryViolation,\n  };\n};\n\nexport const getNudgedPopoverRect = (\n  popoverRect: ClientRect,\n  boundaryRect: ClientRect,\n  boundaryInset: number,\n): ClientRect => {\n  const topBoundary = boundaryRect.top + boundaryInset;\n  const leftBoundary = boundaryRect.left + boundaryInset;\n  const rightBoundary = boundaryRect.right - boundaryInset;\n  const bottomBoundary = boundaryRect.bottom - boundaryInset;\n\n  let top = popoverRect.top < topBoundary ? topBoundary : popoverRect.top;\n  top = top + popoverRect.height > bottomBoundary ? bottomBoundary - popoverRect.height : top;\n  let left = popoverRect.left < leftBoundary ? leftBoundary : popoverRect.left;\n  left = left + popoverRect.width > rightBoundary ? rightBoundary - popoverRect.width : left;\n\n  return {\n    top,\n    left,\n    width: popoverRect.width,\n    height: popoverRect.height,\n    right: left + popoverRect.width,\n    bottom: top + popoverRect.height,\n  };\n};\n"]},"metadata":{},"sourceType":"script"}